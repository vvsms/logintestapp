@page "/login"
@using Client.Services
@inject IAuthService AuthService
@inject NavigationManager Nav

<h3>Login</h3>

<div class="mb-2">
    <input class="form-control" placeholder="Email" @bind="email" />
</div>
<div class="mb-2">
    <input class="form-control" placeholder="Password" type="password" @bind="password" />
</div>
<button class="btn btn-primary" @onclick="DoLogin">Login</button>

@if (!string.IsNullOrEmpty(error))
{
    <div class="text-danger mt-2">@error</div>
}

@code {
    private string email = "admin@local.test";
    private string password = "Password123!";
    private string? error;

    private async Task DoLogin()
    {
        var ok = await AuthService.LoginAsync(email, password);
        if (ok) Nav.NavigateTo("/");
        else error = "Login failed";
    }
}
