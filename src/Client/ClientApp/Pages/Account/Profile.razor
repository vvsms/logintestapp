@page "/profile"
@inject ClientApp.Services.AuthService Auth

<h3>Profile</h3>

@if (_profile == null)
{
    <p><em>Loading...</em></p>
}
else
{
    <p><strong>Email:</strong> @_profile.Email</p>
    <p><strong>Name:</strong> @_profile.FullName</p>
    <p><strong>Roles:</strong> @string.Join(", ", _profile.Roles)</p>
    <button @onclick="Logout">Logout</button>
}

@code {
    private ClientApp.Services.UserProfile? _profile;

    protected override async Task OnInitializedAsync()
    {
        _profile = await Auth.GetProfileAsync();
    }

    private async Task Logout()
    {
        await Auth.LogoutAsync();
        _profile = null;
    }
}
